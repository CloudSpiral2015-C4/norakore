<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/normalize.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/default.css">
	<script type='text/javascript' src="js/jquery-1.11.3.min.js"></script>
	<script type='text/javascript' src="js/bootstrap.js" ></script>
	<script type='text/javascript' src="js/common.js" ></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
	<title>アップロードページ</title>
</head>
<body>
	<div id="iphone-wrapper">
	<div id="wrapper">
	<div id="user-info-header"></div>
	<div id="main">	
	<h1 class="text-center">アップロード</h1>
	<h2 class="text-center">入力フォーム</h2>
	<p>にゃばたーアップロードの入力項目の説明を書く．</p>
	
	 <form class="form-horizontal form-custom" role="form" method="post">
            <div class="form-group">
                <label class="col-xs-12" for="name">名前</label>
                <div class="col-xs-12">
                    <input type="text" class="form-control" id="name" name="name" placeholder="にゃんこたろう">
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-12" for="type">種類</label>
                <div class="col-xs-12">
                    <select class="form-control" id="type" name="type">
                        <option value="0">不明</option>
                        <option value="1">三毛猫</option>
                        <option value="2">黒猫</option>
                        <option value="3">白猫</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-12" for="picture">画像</label>
                <div class="col-xs-12">
                    <input type="file" class="form-control" id="picture" name="picture">
                </div>
            </div>
            <div class="form-group">
                <input type="hidden" class="form-control" id="userId" name="userId" value="testUser">
            </div>
            <div class="form-group">
                <div class="col-xs-offset-2 col-xs-10">
                    <button type="submit" id="submit" class="btn btn-custom" data-color="pink" data-width="30"><p>登録</p></button>
                </div>
            </div>
        </form>

<script>
$('#submit').click(function() {
    var name = $('#name').val();
    var type = $('#type').val();
    var picture = encodeBase64($('#picture')[0].file[0]);
    var userId = $('#userId').val();
    var lat = "";
    var lon = "";
    navigator.geolocation.getCurrentPosition(function(pos) {
            lat = pos.coords.latitude;
            lon = pos.coords.longitude;
        },
        function(e){
            console.log("ERROR: navigator.geolocation.getCurrentPosition()" + e);
        }
    );
    $.ajax({
        type: 'POST',
        url: '../api/register',
        data: {
            name: name,
            userId: userId,
            picture: picture,
            type: type,
            lat: lat,
            lon: lon
        },
        success: function(xml) {
            console.log(xml);
        }
    });

});
</script>
	
	</div><!-- main -->

	<div id="menu-button-footer"></div>
	
	</div>
	</div>
</body>
<script>
	getUserInfoHeader("ゲスト");
	getMenuButtonFooter("このページはテンプレートです");
</script>
</html>
